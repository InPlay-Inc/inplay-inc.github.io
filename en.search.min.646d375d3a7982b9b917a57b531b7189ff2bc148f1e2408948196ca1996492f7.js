"use strict";(function(){const i="/en.search-data.min.dd678f7db51195ed9c439ac4b487c058571e1586c5a8deaa66f022f5889dc097.json",a=Object.assign({cache:!0},{doc:{id:"id",field:["title","content"],store:["title","href","content","section"]}});var n=param("f"),r=parseInt(param("i"));n&&c(n,r);const e=document.querySelector("#book-search-input"),t=document.querySelector("#book-search-results");if(!e)return;e.addEventListener("focus",s),e.addEventListener("keyup",o),document.addEventListener("keypress",l);function c(e,t){if(window.find&&window.getSelection){var n,o,i,s=0;document.designMode="on",o=window.getSelection(),o.collapse(document.body,0);let a=document.getElementsByClassName("markdown")[0].children;for(n=0;n<a.length;n++){let o=a[n];const c=new RegExp(e,"gi");let r=o.textContent.toLowerCase().match(c);if(r!==null){if(t<=s){o.scrollIntoView({behavior:"smooth",block:"center"}),i=new Mark(o),i.mark(e);break}s+=r.length}}document.designMode="off"}}function l(t){if(t.target.value!==void 0)return;if(e===document.activeElement)return;const n=String.fromCharCode(t.charCode);if(!d(n))return;e.focus(),t.preventDefault()}function d(t){const n=e.getAttribute("data-hotkeys")||"";return n.indexOf(t)>=0}function s(){e.removeEventListener("focus",s),e.required=!0,fetch(i).then(e=>e.json()).then(e=>{window.bookSearchIndex=FlexSearch.create("balance",a),window.bookSearchIndex.add(e)}).then(()=>e.required=!1).then(o)}function o(){for(;t.firstChild;)t.removeChild(t.firstChild);if(!e.value)return;const n=window.bookSearchIndex.search(e.value,10);n.forEach(function(n){for(var s,i,a,r,c,l,h,o=n.content,m=new RegExp(e.value,"gi"),f=[],d=0;l=m.exec(o);){s=l.index,f.push(s),i="",a="",s<=10?(r=0,c=s+30):(i+="...",r=s-10,c=s+40),c<=o.length?(a=o.substring(r,c),i+=a+"..."):(a=o.substring(r,o.length-1),i+=a);const m=u("<li><a href></a><small></small></li>"),p=m.querySelector("a"),g=m.querySelector("small");p.href=n.href+"?f="+e.value+"&i="+d,p.textContent=i,g.textContent=n.section+"Â·"+n.title,t.appendChild(m),h=new Mark(m),h.mark(e.value),d++}})}function u(e){const t=document.createElement("div");return t.innerHTML=e,t.firstChild}})()