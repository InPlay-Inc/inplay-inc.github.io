<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="HCI Command # Introduction to BLE HCI Commands # BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication. These commands enable the host to initiate various actions, such as establishing connections, configuring parameters, and managing the overall behavior of the Bluetooth device.
HCI Command Structure # BLE HCI commands follow a specific structure, adhering to a standardized format that includes an HCI type, opcode, and parameters."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="HCI Command"><meta property="og:description" content="HCI Command # Introduction to BLE HCI Commands # BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication. These commands enable the host to initiate various actions, such as establishing connections, configuring parameters, and managing the overall behavior of the Bluetooth device.
HCI Command Structure # BLE HCI commands follow a specific structure, adhering to a standardized format that includes an HCI type, opcode, and parameters."><meta property="og:type" content="article"><meta property="og:url" content="/docs/in6xxe/getting-started/testing/hci_command.html"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-12-19T15:07:36+08:00"><title>HCI Command | InPlay Doc</title>
<link rel=manifest href=../../../../manifest.json><link rel=icon href=../../../../favicon.png><link rel=stylesheet href=../../../../book.min.7b5ca60448c7e874974d6d12156f89c2b32da59c25ae776b2522852d3ebb0865.css><script defer src=../../../../flexsearch.min.js></script><script defer src=../../../../en.search.min.4c35c1a701e70ea03a9fa10a6e8ee4d2c4981205240a0b20292a1dd3c9940cb7.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=../../../../><span>InPlay Doc</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-ee8b8fb3a2ebd2cf7f56e1b840730602 class=toggle>
<label for=section-ee8b8fb3a2ebd2cf7f56e1b840730602 class="flex justify-between"><a role=button>IN100</a></label><ul></ul></li><li><span>IN6XXE</span><ul><li><input type=checkbox id=section-10a602a2afbac6b637ea6cafedc74c08 class=toggle checked>
<label for=section-10a602a2afbac6b637ea6cafedc74c08 class="flex justify-between"><a role=button>Getting Started</a></label><ul><li><input type=checkbox id=section-c0533e207424bbd85c1ed5e367c68a38 class=toggle>
<label for=section-c0533e207424bbd85c1ed5e367c68a38 class="flex justify-between"><a role=button>Installation</a></label><ul><li><a href=../../../../docs/in6xxe/getting-started/installation/quick-start.html>Quick Start</a></li><li><a href=../../../../docs/in6xxe/getting-started/installation/quick-start-with-gcc.html>Quick Start with GCC</a></li><li><a href=../../../../docs/in6xxe/getting-started/installation/run-zephyr-on-in6xxe.html>Run Zephyr on IN6XXE</a></li></ul></li><li><input type=checkbox id=section-4ee5b2397a599e035459a043e9269243 class=toggle>
<label for=section-4ee5b2397a599e035459a043e9269243 class="flex justify-between"><a role=button>Configration and Building</a></label><ul></ul></li><li><input type=checkbox id=section-0fcab4eb5e7d4aac163677313b48ef9d class=toggle>
<label for=section-0fcab4eb5e7d4aac163677313b48ef9d class="flex justify-between"><a role=button>Download Image</a></label><ul><li><a href=../../../../docs/in6xxe/getting-started/download/in_prog-guide.html>InPlay Programmer Guide</a></li><li><a href=../../../../docs/in6xxe/getting-started/download/in_prog_v3.html>InPlay Programmer V3 Guide</a></li><li><a href=../../../../docs/in6xxe/getting-started/download/jflash-download-guide.html>JFlash Programming</a></li></ul></li><li><input type=checkbox id=section-620480f69a74c9672be0a1ecdaca3f9a class=toggle checked>
<label for=section-620480f69a74c9672be0a1ecdaca3f9a class="flex justify-between"><a role=button>Testing and Debuging</a></label><ul><li><a href=../../../../docs/in6xxe/getting-started/testing/rtt-viewer-guide.html>Rtt Viewer Guide</a></li><li><a href=../../../../docs/in6xxe/getting-started/testing/debug-guide.html>Debug Guide</a></li><li><a href=../../../../docs/in6xxe/getting-started/testing/hci_command.html class=active>HCI Command</a></li></ul></li></ul></li><li><input type=checkbox id=section-e9d08457f4c51bb4cb1e62cc94f322dc class=toggle>
<label for=section-e9d08457f4c51bb4cb1e62cc94f322dc class="flex justify-between"><a role=button>User Guides</a></label><ul><li><input type=checkbox id=section-e7402e460cdffdf6d75edb23894ae0c5 class=toggle>
<label for=section-e7402e460cdffdf6d75edb23894ae0c5 class="flex justify-between"><a role=button>Driver Integration</a></label><ul><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/adc-guide.html>ADC Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/antenna-diversity.html>Antenna Diversity</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/aoa-antenna.html>AOA Antenna Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/counter-development-guide.html>Counter Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/crc-guide.html>CRC Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/gpio-guide.html>GPIO Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/i2c-guide.html>I2C Communication</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/spi-guide.html>SPI Communication</a></li><li><a href=../../../../docs/in6xxe/user-guides/driver-integration/uart-guide.html>UART Communication</a></li></ul></li><li><input type=checkbox id=section-54628a101b07426659df9579479aa6d8 class=toggle>
<label for=section-54628a101b07426659df9579479aa6d8 class="flex justify-between"><a role=button>NanoSync Technology</a></label><ul><li><a href=../../../../docs/in6xxe/user-guides/nanosync-technology/advanced-timer-guide.html>NanoSync Timer Guide</a></li><li><a href=../../../../docs/in6xxe/user-guides/nanosync-technology/trigger-handler-guide.html>NanoSync Engine Guide</a></li></ul></li></ul></li><li><input type=checkbox id=section-782653f6bb259ea0ac24d90b105a7dc0 class=toggle>
<label for=section-782653f6bb259ea0ac24d90b105a7dc0 class="flex justify-between"><a role=button>Protocol Reference</a></label><ul><li><input type=checkbox id=section-5f58fc20691c6de2641f46a033a55d28 class=toggle>
<label for=section-5f58fc20691c6de2641f46a033a55d28 class="flex justify-between"><a role=button>BLE</a></label><ul><li><a href=../../../../docs/in6xxe/protocols-reference/ble/inplay-ble5.0-at-command-set.html>BLE5.0 AT Command Set</a></li><li><a href=../../../../docs/in6xxe/protocols-reference/ble/gatt_programming_guild.html>GATT Programming Guide</a></li><li><a href=../../../../docs/in6xxe/protocols-reference/ble/inplay_trx_profile.html>Inplay Transparent Data Transmission (TRx) profile User Guide</a></li></ul></li><li><input type=checkbox id=section-614316ec926d5d4f33757567a52185b7 class=toggle>
<label for=section-614316ec926d5d4f33757567a52185b7 class="flex justify-between"><a role=button>SDR</a></label><ul></ul></li><li><input type=checkbox id=section-7570f1740ec51694c058a21927f48553 class=toggle>
<label for=section-7570f1740ec51694c058a21927f48553 class="flex justify-between"><a role=button>SMULL</a></label><ul><li><a href=../../../../docs/in6xxe/protocols-reference/smull/inplay-smull-development-guide.html>SMULL Command Set</a></li></ul></li></ul></li><li><input type=checkbox id=section-67e1be7c03648874e72d6c95838f0f26 class=toggle>
<label for=section-67e1be7c03648874e72d6c95838f0f26 class="flex justify-between"><a href=../../../../docs/in6xxe/api-documatation.html>API Documentation</a></label><ul></ul></li><li><input type=checkbox id=section-42952569164db7f3f6f894adee6e4523 class=toggle>
<label for=section-42952569164db7f3f6f894adee6e4523 class="flex justify-between"><a role=button>Tools</a></label><ul><li><a href=../../../../docs/in6xxe/tools/ota-app-develop-guide.html>InPlay OTA App Development Guide</a></li><li><a href=../../../../docs/in6xxe/tools/ota-app.html>InPlayOTA App Guide</a></li></ul></li><li><input type=checkbox id=section-df7b9e936bf162d5e2a48a7f82ae2852 class=toggle>
<label for=section-df7b9e936bf162d5e2a48a7f82ae2852 class="flex justify-between"><a role=button>Examples and Use Case</a></label><ul><li><a href=../../../../docs/in6xxe/examples-and-use-case/debug-reference.html>Debug Reference</a></li><li><input type=checkbox id=section-26e2ce46acb4d4970a7850c67da09d8c class=toggle>
<label for=section-26e2ce46acb4d4970a7850c67da09d8c class="flex justify-between"><a role=button>Driver Examples</a></label><ul><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/adc-sample.html>ADC Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/aes-sample.html>AES Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/ecc-sample.html>ECC Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/gpio-interrupt-sample.html>GPIO Interrupt Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/gpio-reset-sample.html>GPIO Reset Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/gpio-sample.html>GPIO Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/gpio-wake-interrupt-sample.html>GPIO Wake Interrupt Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/gpio-wake-sample.html>GPIO Wake Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/i2c-sample.html>I2C Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/ir-sample.html>IR Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/keyboard-sample.html>Keyboard Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/pwm-sample.html>PWM Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/qdec-sample.html>QDEC Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/spi-sample.html>SPI Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/timer-sample.html>Timer Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/trigger-example-guide.html>Trigger Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/driver-examples/uart-sample-guide.html>UART Sample</a></li></ul></li><li><input type=checkbox id=section-542a43954a490ea3485a8e09b1381781 class=toggle>
<label for=section-542a43954a490ea3485a8e09b1381781 class="flex justify-between"><a role=button>Misc Examples</a></label><ul><li><a href=../../../../docs/in6xxe/examples-and-use-case/misc/hci-sample.html>HCI Sample</a></li></ul></li><li><input type=checkbox id=section-48884cb02637a51d8702e5e3edfef40c class=toggle>
<label for=section-48884cb02637a51d8702e5e3edfef40c class="flex justify-between"><a role=button>BLE Examples</a></label><ul><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-advertising-sample.html>BLE advertising Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-gatt-sample.html>BLE GATT Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-initiation-sample.html>BLE Initiation Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-keyboard-sample.html>BLE Keyboard Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-scan-sample.html>BLE Scan Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/ble/ble-transparent-transmission-sample.html>BLE Transparent Transmission Sample</a></li></ul></li><li><input type=checkbox id=section-f989d19f5bf8a5459f7ee77a2dbc2a37 class=toggle>
<label for=section-f989d19f5bf8a5459f7ee77a2dbc2a37 class="flex justify-between"><a role=button>SDR Examples</a></label><ul><li><a href=../../../../docs/in6xxe/examples-and-use-case/sdr/sdr-1-master-to-multiple-slave-sample.html>SDR 1 to n Sample</a></li><li><a href=../../../../docs/in6xxe/examples-and-use-case/sdr/sdr-broadcast-sample-.html>SDR Broadcast Sample</a></li></ul></li></ul></li><li><input type=checkbox id=section-ecb777ba06679db84f6d08dc316cb5b2 class=toggle>
<label for=section-ecb777ba06679db84f6d08dc316cb5b2 class="flex justify-between"><a role=button>Development Kits</a></label><ul><li><a href=../../../../docs/in6xxe/dk/introduction-to-in6xxe-dk.html>Introduction to IN6XXE DK</a></li></ul></li></ul></li><li><input type=checkbox id=section-0bc0ac0bfec6b1ae25463138a2ae299e class=toggle>
<label for=section-0bc0ac0bfec6b1ae25463138a2ae299e class="flex justify-between"><a role=button>Solutions</a></label><ul><li><input type=checkbox id=section-f3c900f3ced930b282424e06187e7b20 class=toggle>
<label for=section-f3c900f3ced930b282424e06187e7b20 class="flex justify-between"><a role=button>Find My</a></label><ul><li><a href=../../../../docs/solutions/find-my/find-my-sdk-guide.html>Find My Sdk Guide</a></li></ul></li><li><input type=checkbox id=section-01b7a4cd745504c7ef54cce6910e09a8 class=toggle>
<label for=section-01b7a4cd745504c7ef54cce6910e09a8 class="flex justify-between"><a role=button>MultiConnNet</a></label><ul><li><a href=../../../../docs/solutions/multiconnnet/introduction.html>Introduction</a></li><li><a href=../../../../docs/solutions/multiconnnet/command-set.html>Module Instruction Set</a></li><li><a href=../../../../docs/solutions/multiconnnet/user-guild.html>User Guild</a></li></ul></li><li><input type=checkbox id=section-afc3c4284a3a81612ced6ce66dbe01d3 class=toggle>
<label for=section-afc3c4284a3a81612ced6ce66dbe01d3 class="flex justify-between"><a role=button>SMULL Pass-through Network</a></label><ul><li><a href=../../../../docs/solutions/smull/inplay-smull-development-guide.html>SMULL Command Set</a></li></ul></li><li><input type=checkbox id=section-3c853b7573728b720bb9f6d05f87354b class=toggle>
<label for=section-3c853b7573728b720bb9f6d05f87354b class="flex justify-between"><a role=button>Stellar</a></label><ul><li><a href=../../../../docs/solutions/stellar/stellar-gateway-wireless-communication-protocol-implementation-guide.html>Wireless Communication Protocol</a></li></ul></li><li><input type=checkbox id=section-15c87bcd4d931f9a897cb9565047755d class=toggle>
<label for=section-15c87bcd4d931f9a897cb9565047755d class="flex justify-between"><a role=button>Wireless Modbus Network</a></label><ul><li><a href=../../../../docs/solutions/modbus/wireless-modbus-demo-guide.html>Wireless Modbus Demo Guide</a></li><li><a href=../../../../docs/solutions/modbus/wireless-modbus-module.html>Wireless Modbus Module</a></li></ul></li></ul></li><li><input type=checkbox id=section-7e7f18f2dd14f1d43dd9be3434b07e7b class=toggle>
<label for=section-7e7f18f2dd14f1d43dd9be3434b07e7b class="flex justify-between"><a role=button>IN6XX</a></label><ul><li><input type=checkbox id=section-63252a7c2c256e222256d33b9f7363a6 class=toggle>
<label for=section-63252a7c2c256e222256d33b9f7363a6 class="flex justify-between"><a role=button>Getting Started</a></label><ul><li><input type=checkbox id=section-7e1496f76a7a40a604ce733f3e2bdacf class=toggle>
<label for=section-7e1496f76a7a40a604ce733f3e2bdacf class="flex justify-between"><a role=button>Installation</a></label><ul><li><a href=../../../../docs/in6xx/getting-started/installation/quick-start.html>Quick Start</a></li></ul></li><li><input type=checkbox id=section-7c5cc973fcb5ebb7f1a051dd9211755c class=toggle>
<label for=section-7c5cc973fcb5ebb7f1a051dd9211755c class="flex justify-between"><a role=button>Configration and Building</a></label><ul></ul></li><li><input type=checkbox id=section-fb6709c7bc2f74dd748ca851379bed41 class=toggle>
<label for=section-fb6709c7bc2f74dd748ca851379bed41 class="flex justify-between"><a role=button>Download Image</a></label><ul><li><a href=../../../../docs/in6xx/getting-started/download/in_prog-guide.html>InPlay Programmer Guide</a></li><li><a href=../../../../docs/in6xx/getting-started/download/jflash-download-guide.html>JFlash Programming</a></li><li><a href=../../../../docs/in6xx/getting-started/download/mp-tool-guide.html>MP Tool Guide</a></li></ul></li><li><input type=checkbox id=section-ed9f99fe4754a35a21fe02be8b0cb4f7 class=toggle>
<label for=section-ed9f99fe4754a35a21fe02be8b0cb4f7 class="flex justify-between"><a role=button>Testing and Debuging</a></label><ul><li><a href=../../../../docs/in6xx/getting-started/testing/rtt-viewer-guide.html>Rtt Viewer Guide</a></li><li><a href=../../../../docs/in6xx/getting-started/testing/debug-guide.html>Debug Guide</a></li><li><a href=../../../../docs/in6xx/getting-started/testing/hci_command.html>HCI Command</a></li></ul></li></ul></li><li><input type=checkbox id=section-4180a1cd8bda36e24d2a9c527ab046fe class=toggle>
<label for=section-4180a1cd8bda36e24d2a9c527ab046fe class="flex justify-between"><a role=button>Protocol Reference</a></label><ul><li><input type=checkbox id=section-7dd9db7eea8acbc738b8e6a6e64afef0 class=toggle>
<label for=section-7dd9db7eea8acbc738b8e6a6e64afef0 class="flex justify-between"><a role=button>BLE</a></label><ul><li><a href=../../../../docs/in6xx/protocol-reference/ble/gatt-programming-guide.html>GATT Programming Guide</a></li><li><a href=../../../../docs/in6xx/protocol-reference/ble/inplay_trx_profile.html>Inplay Transparent Data Transmission (TRx) profile User Guide</a></li></ul></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=../../../../svg/menu.svg class=book-icon alt=Menu>
</label><strong>HCI Command</strong>
<label for=toc-control><img src=../../../../svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ol><li><a href=#introduction-to-ble-hci-commands>Introduction to BLE HCI Commands</a></li><li><a href=#hci-command-structure>HCI Command Structure</a></li><li><a href=#hci-command-format>HCI Command Format</a></li><li><a href=#hci-event-format>HCI Event Format</a></li><li><a href=#command-example>Command Example:</a></li><li><a href=#command-parameters>Command Parameters</a></li><li><a href=#hci--test-command-description>HCI Test Command Description</a><ol><li><a href=#reset>Reset</a></li><li><a href=#end-test>End Test</a></li><li><a href=#start-tx-test-modulation-signal>Start TX Test (Modulation signal)</a></li><li><a href=#start-rx-test-receive-mode>Start RX Test (Receive mode)</a></li><li><a href=#start-enhanced-tx-test>Start Enhanced TX Test</a></li><li><a href=#start-enhanced-rx-test>Start Enhanced RX Test</a></li><li><a href=#stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)</a></li><li><a href=#start-carrier-tx-carrier-signal>Start Carrier TX (carrier signal)</a></li><li><a href=#get-rssi>Get RSSI</a></li><li><a href=#vendor-tx-command>Vendor TX command</a></li><li><a href=#vendor-tx-end>Vendor TX end</a></li><li><a href=#set-cap>Set Cap</a></li><li><a href=#save--cap-to-flash>Save Cap to Flash</a></li><li><a href=#set-tx-power>Set TX Power</a></li><li><a href=#set-tx-gain>Set TX Gain</a></li><li><a href=#set-tx-power-table>Set TX Power Table</a></li><li><a href=#read-register>Read Register</a></li><li><a href=#write-register>Write Register</a></li><li><a href=#get-version-number>Get Version Number</a></li><li><a href=#set-trx-enable-pin>Set TRX Enable Pin</a></li><li><a href=#gpio-output>GPIO Output</a></li><li><a href=#gpio-input>GPIO input</a></li><li><a href=#get-adc-sample>Get ADC sample</a></li><li><a href=#start-pwm>Start PWM</a></li><li><a href=#stop-pwm>Stop PWM</a></li><li><a href=#set-rtc32k-output>Set RTC32K Output</a></li><li><a href=#enter-deep-sleep>Enter Deep Sleep</a></li><li><a href=#dut-calibrate-xo>DUT Calibrate XO</a></li><li><a href=#dut-set-tx-power>DUT Set TX Power</a></li><li><a href=#dut-rx-sensitivity>DUT RX Sensitivity</a></li><li><a href=#dut-download-image>DUT Download Image</a></li><li><a href=#measure-xo>Measure XO</a></li><li><a href=#start-ble-scan>Start BLE Scan</a></li><li><a href=#start-sdr-scan>Start SDR Scan</a></li><li><a href=#stop-scan>Stop Scan</a></li><li><a href=#get-hw-id>Get HW ID</a></li></ol></li></ol></nav></aside></header><article class=markdown><h1 id=hci-command>HCI Command
<a class=anchor href=#hci-command>#</a></h1><h2 id=introduction-to-ble-hci-commands>Introduction to BLE HCI Commands
<a class=anchor href=#introduction-to-ble-hci-commands>#</a></h2><p>BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication. These commands enable the host to initiate various actions, such as establishing connections, configuring parameters, and managing the overall behavior of the Bluetooth device.</p><h2 id=hci-command-structure>HCI Command Structure
<a class=anchor href=#hci-command-structure>#</a></h2><p>BLE HCI commands follow a specific structure, adhering to a standardized format that includes an HCI type, opcode, and parameters. Understanding this structure is essential for developers and engineers working on BLE devices, as it allows them to communicate effectively with the Bluetooth controller.</p><h2 id=hci-command-format>HCI Command Format
<a class=anchor href=#hci-command-format>#</a></h2><p>The general format of a BLE HCI command packet is as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>| HCI Type (1 byte) | Opcode (2 bytes) | Param Length | Params |
</span></span><span style=display:flex><span>|-------------------|------------------|--------------|--------|
</span></span></code></pre></div><ul><li><strong>HCI Type:</strong> A one-byte identifier specifying the type of HCI command. It is 0x1 for HCI command packet.</li><li><strong>Opcode (Operation Code):</strong> A unique identifier (2 bytes) specifying the type of command.</li><li><strong>Parameter Length:</strong> A byte indicating the length of the parameters that follow.</li><li><strong>Parameters:</strong> Additional data or information associated with the command.</li></ul><h2 id=hci-event-format>HCI Event Format
<a class=anchor href=#hci-event-format>#</a></h2><p>Similarly, the format for an HCI event packet is structured as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>| HCI Type (1 byte) | Event Code (1 byte) | Parameter Length | Data | 
</span></span><span style=display:flex><span>|-------------------|---------------------|------------------|------|
</span></span></code></pre></div><ul><li><strong>HCI Type:</strong> A one-byte identifier specifying the type of HCI event. It is 0x4 for HCI event packet.</li><li><strong>Event Code:</strong> A unique identifier (1 byte) specifying the type of event or response. It is 0xE for command complete event.</li><li><strong>Parameter Length:</strong> A byte indicating the length of the parameters or data that follow.</li><li><strong>Data:</strong> Additional information or payload associated with the event or response.</li></ul><h2 id=command-example>Command Example:
<a class=anchor href=#command-example>#</a></h2><p><strong>Reset Command</strong></p><p>Command: <code>0x01, 0x03, 0x0C, 0x00</code></p><ul><li>0x01 – HCI Type</li><li>0x03 0x0C – operation code</li><li>0x00 – the number of bytes of parameters. For reset, the number is zero because no parameter.</li></ul><p>Command Complete Event: <code>0x04, 0x0E, &lt;Packet len >&lt;Commands Available>, 0x01, 0x03, 0x0C, &lt;status></code></p><ul><li><code>0x04</code> – single byte before all events.</li><li><code>0x0E</code> – event code after command completion</li><li><code>&lt;Packet Len></code> - Length of all of the parameters contained in this packet. It is 0x4 in this example.</li><li><code>&lt;Commands Available></code> – the number of commands that the controller can receive. It is 0x1 by default.</li><li><code>0x01 0x03 0x0C</code> – operation code</li><li><code>&lt;status></code> – <code>0x00</code> means the command was successful. If not <code>0x00</code>, it means an error. The error list reference is to <em>Volume 2 Part D of the Core Spec for a list of error codes</em>.</li></ul><h2 id=command-parameters>Command Parameters
<a class=anchor href=#command-parameters>#</a></h2><p><em>Table 1</em></p><ul><li>packet type:<table><thead><tr><th>Packet type</th><th>Payload</th></tr></thead><tbody><tr><td>0x00</td><td>PRBS9 sequence ‘11111111100000111101…’ (in transmission order)</td></tr><tr><td>0x01</td><td>Repeated ‘11110000’ (in transmission order)</td></tr><tr><td>0x02</td><td>Repeated ‘10101010’ (in transmission order)</td></tr><tr><td>0x03</td><td>PRBS15</td></tr><tr><td>0x04</td><td>Repeated ‘11111111’</td></tr><tr><td>0x05</td><td>Repeated ‘00000000’</td></tr><tr><td>0x06</td><td>Repeated ‘00001111’</td></tr><tr><td>0x07</td><td>Repeated ‘01010101’</td></tr></tbody></table></li></ul><hr><p><em>Table 2</em></p><ul><li>phy:<table><thead><tr><th>Phy</th><th>Description</th></tr></thead><tbody><tr><td>0x01</td><td>Transmitter set to use the LE 1M PHY</td></tr><tr><td>0x02</td><td>Transmitter set to use the LE 2M PHY</td></tr><tr><td>0x03</td><td>Transmitter set to use the LE Coded PHY with S=8 data coding</td></tr><tr><td>0x04</td><td>Transmitter set to use the LE Coded PHY with S=2 data coding</td></tr></tbody></table></li></ul><hr><p><em>Table 3</em></p><ul><li>tx power:<table><thead><tr><th>Value</th><th>TX Power</th></tr></thead><tbody><tr><td>0x00</td><td>Max Power</td></tr><tr><td>0x01</td><td>7dBm</td></tr><tr><td>0x02</td><td>6.5dBm</td></tr><tr><td>0x03</td><td>6dBm</td></tr><tr><td>0x04</td><td>5.5dBm</td></tr><tr><td>0x05</td><td>5dBm</td></tr><tr><td>0x06</td><td>4.5dBm</td></tr><tr><td>0x07</td><td>4dBm</td></tr><tr><td>0x08</td><td>3.5dBm</td></tr><tr><td>0x09</td><td>3dBm</td></tr><tr><td>0x0A</td><td>2.5dBm</td></tr><tr><td>0x0B</td><td>2dBm</td></tr><tr><td>0x0C</td><td>1.5dBm</td></tr><tr><td>0x0D</td><td>1dBm</td></tr><tr><td>0x0E</td><td>0.5dBm</td></tr><tr><td>0x0F</td><td>0dBm</td></tr><tr><td>0x10</td><td>-1dBm</td></tr><tr><td>0x11</td><td>-2dBm</td></tr><tr><td>0x12</td><td>-3dBm</td></tr><tr><td>0x13</td><td>-4dBm</td></tr><tr><td>0x14</td><td>-5dBm</td></tr><tr><td>0x15</td><td>-6dBm</td></tr><tr><td>0x16</td><td>-8dBm</td></tr><tr><td>0x17</td><td>-10dBm</td></tr><tr><td>0x18</td><td>-12dBm</td></tr><tr><td>0x19</td><td>-16dBm</td></tr><tr><td>0x1A</td><td>-20dBm</td></tr><tr><td>0x1B</td><td>-43dBm</td></tr></tbody></table></li></ul><hr><h2 id=hci--test-command-description>HCI Test Command Description
<a class=anchor href=#hci--test-command-description>#</a></h2><ol><li><h3 id=reset>Reset
<a class=anchor href=#reset>#</a></h3></li></ol><p>The Reset command needs to be sent only once after power-up.</p><p>Command: <code>0x01, 0x03, 0x0C, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E,0x04, 0x01, 0x03, 0x0C, &lt;status></code></p><ol start=2><li><h3 id=end-test>End Test
<a class=anchor href=#end-test>#</a></h3></li></ol><p>After each modulation signal test command (TX or RX command) is completed, you need to send an &ldquo;end test command.&rdquo; The end test command is as simple as the reset command, but the return command is more complex. The commands returned by the serial port include 2 bytes, indicating the number of packets received by DUT at the end of the command. Reference to <em>Volume 2 Part E Section 7.8.30.</em></p><p>Command: <code>0x01, 0x1F, 0x20, 0x00</code></p><p>Complete Event：<code>0x04, 0x0E, 0x06, 0x01, 0x1F, 0x20, &lt;status>, &lt;packets number byte 0>, &lt;packets number byte 1></code></p><ol start=3><li><h3 id=start-tx-test-modulation-signal>Start TX Test (Modulation signal)
<a class=anchor href=#start-tx-test-modulation-signal>#</a></h3></li></ol><p>The LE TX test command has 3 parameters, channel ,data length ,packet type. Reference to <em>Volume 2 Part E Section 7.8.29</em>.</p><p>Transmitter Test command：<code>0x01, 0x1E, 0x20, 0x03, &lt;channel>, &lt;data length>, &lt;packet type></code></p><ul><li>channel: the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402G</li><li>data length: please use 0x25 in 1M mode</li><li>packet type: please refer to Table 1.</li></ul><p>Complete Event：<code>0x04, 0x0E, 0x04, 0x01, 0x1E, 0x20, &lt;status></code></p><ol start=4><li><h3 id=start-rx-test-receive-mode>Start RX Test (Receive mode)
<a class=anchor href=#start-rx-test-receive-mode>#</a></h3></li></ol><p>The LE RX test command has 1 parameter, channel. Reference to <em>Volume 2 Part E Section 7.8.28</em>.</p><p>Receive Test command：<code>0x01, 0x1D, 0x20, 0x01, &lt;channel></code></p><ul><li>channel: the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402GHz</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x1D, 0x20, &lt;status></code></p><ol start=5><li><h3 id=start-enhanced-tx-test>Start Enhanced TX Test
<a class=anchor href=#start-enhanced-tx-test>#</a></h3></li></ol><p>The LE Enhanced TX Test command has 3 parameters - the transmit channel. See Volume 2 Part E Section 7.8.501</p><p>Command: <code>0x01, 0x34, 0x20, 0x04, &lt;channel>, &lt;data length>, &lt;packet type>, &lt;phy></code></p><ul><li><p>channel: the range is 0x00 to 0x27 (39), the formula is: N = (F - 2402)/ 2; 0x00 represents 2.402G</p></li><li><p>data length: please use 0x25 in 1M mode</p></li><li><p>packet type: please refer to Table 1</p></li><li><p>phy: Please refer to Table 2</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x34, 0x20, &lt;status></code></p><ol start=6><li><h3 id=start-enhanced-rx-test>Start Enhanced RX Test
<a class=anchor href=#start-enhanced-rx-test>#</a></h3></li></ol><p>The LE Enhanced Receive Mode Test command has one parameter - Receive Channel, see Volume 2 Part E Section 7.8.50.</p><p>Command: <code>0x01, 0x33, 0x20, 0x03, &lt;channel>, &lt;phy>, &lt;modulation index></code></p><ul><li><p>channel: range 0x00 to 0x27 (39), formula: N = (F - 2402)/ 2; 0x00 represents 2.402G</p></li><li><p>phy: please refer to Table 2</p></li><li><p>modulation index: Normally set to 0</p><ul><li><p>0x00 Assume transmitter will have a standard modulation index</p></li><li><p>0x01 Assume transmitter will have a stable modulation index</p></li></ul></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x33, 0x20, &lt;status></code></p><ol start=7><li><h3 id=stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)
<a class=anchor href=#stop-carrier-tx--carrier-signal>#</a></h3></li></ol><p>Command：<code>0x01, 0x04, 0xFC, 0x00</code></p><p>Complete Event:<code>0x04, 0x0E,0x04, 0x01, 0x04, 0xFC, &lt;status></code></p><p><em><strong>The following commands are vendor specified.</strong></em></p><ol start=8><li><h3 id=start-carrier-tx-carrier-signal>Start Carrier TX (carrier signal)
<a class=anchor href=#start-carrier-tx-carrier-signal>#</a></h3></li></ol><p>Command：<code>0x01, 0x01, 0xFC, 0x02, &lt;channel> &lt;TX gain></code></p><ul><li>channel: the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402GHz</li><li>TX gain:<ul><li>0: Don&rsquo;t change TX power setting.</li><li>0x1 ~ 0x7F: PA gain.</li></ul></li></ul><p>Note:</p><pre><code>Suggest set TX gain to 0x0, and use &quot;Set TX Power&quot; command to set TX power.
</code></pre><p>Complete Event：<code>0x04, 0x0E, 0x04, 0x01, 0x01, 0xFC, &lt;status></code></p><ol start=9><li><h3 id=get-rssi>Get RSSI
<a class=anchor href=#get-rssi>#</a></h3></li></ol><p>Command：<code>0x01, 0x03, 0xFC, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E, 0x05, 0x01, 0x03, 0xFC, &lt;status> ，&lt;RSSI></code></p><ul><li>RSSI: value of RSSI, it is a int8_t value. Example: return value is 0xCD, RSSI=0xCD-0x100=-51dBm</li></ul><ol start=10><li><h3 id=vendor-tx-command>Vendor TX command
<a class=anchor href=#vendor-tx-command>#</a></h3></li></ol><p>Command：<code>0x01, 0x0D, 0xFC, 0x08, &lt;channel>, &lt;data length>, &lt;packet type>, &lt;phy>, &lt;midx>, &lt;continue tx>, &lt;packet number byte 0>, &lt;packet number byte 1></code></p><ul><li><p>channel: See “Start Enhanced TX Test”</p></li><li><p>data length: See “Start Enhanced TX Test”</p></li><li><p>packet type: Refer to Table 1</p></li><li><p>phy: Refer to Table 2</p></li><li><p>midx: Reserved, must set to 0.</p></li><li><p>cont tx:</p><ul><li><p>1: Continuous TX</p></li><li><p>0: Normal TX</p></li></ul></li><li><p>packet number: TX packet number, 0 is TX forever.
Note:
If packet number is not 0, current is a little higher.</p></li></ul><p>Complete Event:<code>0x04, 0x0E, 0x04, 0x01, 0x0D, 0xFC, &lt;status></code></p><ol start=11><li><h3 id=vendor-tx-end>Vendor TX end
<a class=anchor href=#vendor-tx-end>#</a></h3><p>Stop TX and send back TX packets,
Command: <code>0x01, 0x53, 0xFC, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E, 0x06, 0x01, 0x53, 0xFC, &lt;status> ,&lt;packet number byte 0>, &lt;packet number byte 1></code></p><ul><li>packet number: TX packet number</li></ul></li><li><h3 id=set-cap>Set Cap
<a class=anchor href=#set-cap>#</a></h3></li></ol><p>Command: <code>0x01, 0x05, 0xFC, 0x01 &lt;Cap></code></p><ul><li>cap: capacitance range is 0x0~0xF</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x05, 0xFC, &lt;status></code></p><ol start=13><li><h3 id=save--cap-to-flash>Save Cap to Flash
<a class=anchor href=#save--cap-to-flash>#</a></h3></li></ol><p>Command: <code>0x01, 0x08, 0xFC, 0x01, &lt;Cap></code></p><ul><li><p>cap: capacitance range is 0x0~0xF</p><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x08, 0xFC, &lt;status></code></p></li></ul><ol start=14><li><h3 id=set-tx-power>Set TX Power
<a class=anchor href=#set-tx-power>#</a></h3><p>Set the transmit power according to Table 3.</p></li></ol><p>Commands: <code>0x01, 0x07, 0xFC, 0x01, &lt;TX Power></code></p><ul><li>TX Power: transmit power, range is 0x00 to 0x1A. Please refer to Table 3.</li></ul><p>Complete Event: <code>0x04, 0x0E, 01, 0x04, 0x07, 0xFC, &lt;status></code></p><ol start=15><li><h3 id=set-tx-gain>Set TX Gain
<a class=anchor href=#set-tx-gain>#</a></h3><p>Command: <code>0x01, 0x51, 0xFC, 0x00, &lt;TX Gain></code></p><ul><li>TX Gain: TX gain, range is 0x00 ~ 0x7F. Default is 0x18.</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x51, 0xFC, &lt;status></code></p></li><li><h3 id=set-tx-power-table>Set TX Power Table
<a class=anchor href=#set-tx-power-table>#</a></h3><p>Command: <code>0x01, 0x52, 0xFC, 0x00, &lt;TX Power Table></code></p><ul><li>TX Power Table: Range is 0x01 ~ 0x04. Default is 0x1. Table 1 is for low power mode. And table 4 is for high power mode.</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x51, 0xFC, &lt;status></code></p></li><li><h3 id=read-register>Read Register
<a class=anchor href=#read-register>#</a></h3></li></ol><pre><code>Read register.
</code></pre><p>Command: <code>0x01, 0x0E, 0xFC, 0x04, &lt;Address Byte0>,&lt;Address Byte1>,&lt;Address Byte2>，&lt;Address Byte3></code></p><ul><li><p>Address Byte0: Register address byte 0.</p></li><li><p>Address Byte1: Register address byte 1.</p></li><li><p>Address Byte2: Register address byte 2.</p></li><li><p>Address Byte3: Register address byte 3.</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x08, 0x01, 0x07, 0xFC, &lt;status> ,&lt;Reg Value Byte 0>, &lt;Reg Value Byte 1>,&lt;Reg Value Byte 2>，&lt;Reg Value Byte 3></code></p><ul><li>Reg Value Byte 0: Register value byte 0.</li><li>Reg Value Byte 1: Register value byte 1.</li><li>Reg Value Byte 2: Register value byte 2.</li><li>Reg Value Byte 3: Register value byte 3.</li></ul><ol start=18><li><h3 id=write-register>Write Register
<a class=anchor href=#write-register>#</a></h3></li></ol><p>Write register.</p><p>Command: <code>0x01, 0x0F, 0xFC, 0x08, &lt;Address Byte0>,&lt;Address Byte1>,&lt;Address Byte2>，&lt;Address Byte3>, &lt;Reg Value Byte 0>, &lt;Reg Value Byte 1>,&lt;Reg Value Byte 2>，&lt;Reg Value Byte 3></code></p><ul><li><p>Address Byte0: Register address byte 0.</p></li><li><p>Address Byte1: Register address byte 1.</p></li><li><p>Address Byte2: Register address byte 2.</p></li><li><p>Address Byte3: Register address byte 3.</p></li><li><p>Reg Value Byte 0: Register value byte 0.</p></li><li><p>Reg Value Byte 1: Register value byte 1.</p></li><li><p>Reg Value Byte 2: Register value byte 2.</p></li><li><p>Reg Value Byte 3: Register value byte 3.</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x07, 0xFC, &lt;status></code></p><ol start=19><li><h3 id=get-version-number>Get Version Number
<a class=anchor href=#get-version-number>#</a></h3><p>Command: <code>0x01, 0x5B, 0xFC, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E, 0x08, 0x01, 0x5B, 0xFC, &lt;status> , &lt;version byte 0>, &lt;version byte 1>, &lt;version byte 2>, &lt;version byte 3></code></p><ul><li>Version: 32bit HCI command SW version number</li></ul></li><li><h3 id=set-trx-enable-pin>Set TRX Enable Pin
<a class=anchor href=#set-trx-enable-pin>#</a></h3><p>Command: <code>0x01, 0x44, 0xFC, 0x06, &lt;bias port> &lt;bias pin>, &lt;tx en port>, &lt;tx en pin>,&lt;rx en port>, &lt;rx en pin></code></p><ul><li>bias port: PA bias port, set to 0xFF if it is invaild</li><li>bias pin: PA bias pin, set to 0xFF if it is invaild</li><li>tx en port: TX enable port</li><li>tx en pin: TX enable pin</li><li>rx en port: RX enable port</li><li>rx en pin: RX enable pin</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x44, 0xFC, &lt;status></code></p></li><li><h3 id=gpio-output>GPIO Output
<a class=anchor href=#gpio-output>#</a></h3><p>Command: <code>0x01, 0x0B, 0xFC, 0x03, &lt;port>, &lt;pin>, &lt;output></code></p><ul><li>port: GPIO port</li><li>pin: GPIO pin</li><li>output: GPIO output, 1 is high and 0 is low</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x0B, 0xFC, &lt;status></code></p></li><li><h3 id=gpio-input>GPIO input
<a class=anchor href=#gpio-input>#</a></h3><p>Command: <code>0x01, 0x0C, 0xFC, 0x03, &lt;port>, &lt;pin>, &lt;pull></code></p><ul><li>port: GPIO port</li><li>pin: GPIO pin</li><li>pull: 0 is no pull up/down, 1 is pull up and 2 is pull down</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x0C, 0xFC, &lt;status> &lt;GPIO input></code></p><ul><li>GPIO input: 1 is high and 0 is low</li></ul></li><li><h3 id=get-adc-sample>Get ADC sample
<a class=anchor href=#get-adc-sample>#</a></h3><p>Command: <code>0x01, 0x43, 0xFC, 0x02, &lt;ADC channel>, &lt;parameter></code></p><ul><li><p>ADC channel: ADC channel</p></li><li><p>parameter: If ADC channel is not 13, set this to 0x0. If ADC channel is 13, this value is register pmu_test_mux_ctrl[0:7].
Complete Event: <code>0x04, 0x0E, 0x08, 0x01, 0x43, 0xFC, &lt;status> , &lt;Sample raw data byte 0>, &lt;Sample raw data byte 1> &lt;Sample converted data byte 0>, &lt;Sample converted data byte 1></code></p></li><li><p>Sample raw data: 16 bits ADC sample raw data.</p></li><li><p>Sample converted data: 16 bits converted data in millivolt.</p></li></ul></li><li><h3 id=start-pwm>Start PWM
<a class=anchor href=#start-pwm>#</a></h3><p>Command: <code>0x01, 0x09, 0xFC, 0x01, &lt;pwm id></code></p></li></ol><ul><li><p>pwm id:</p><ul><li><p>PWM0 0</p></li><li><p>PWM1 1</p></li><li><p>PWM2 2</p></li><li><p>PWM3 3</p></li><li><p>PWM4 4</p></li></ul></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x09, 0xFC, &lt;status></code></p><ol start=25><li><h3 id=stop-pwm>Stop PWM
<a class=anchor href=#stop-pwm>#</a></h3><p>Command: <code>0x01, 0x0A, 0xFC, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x0A, 0xFC, &lt;status></code></p></li><li><h3 id=set-rtc32k-output>Set RTC32K Output
<a class=anchor href=#set-rtc32k-output>#</a></h3><p>Command: <code>0x01, 0x46, 0xFC, 0x03, &lt;enable>, &lt;port>, &lt;pin></code>
Output RTC32K signal on specail GPIO. Available pins are GPIO_0_2, GPIO_0_6, GPIO_1_0, GPIO_1_4, GPIO_1_8, GPIO_3_3 and GPIO_4_3.</p></li></ol><ul><li><p>enable: 1 is enable, and 0 is disable</p></li><li><p>port: GPIO port</p></li><li><p>pin: GPIO pin</p><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x46, 0xFC, &lt;status></code></p></li></ul><ol start=27><li><h3 id=enter-deep-sleep>Enter Deep Sleep
<a class=anchor href=#enter-deep-sleep>#</a></h3></li></ol><pre><code>Command: `0x01, 0x54, 0xFC, 0x00`
Enter deep sleep mode,

Complete Event: `0x04, 0x0E, 0x04, 0x01, 0x54, 0xFC, &lt;status&gt;` 
</code></pre><p><em><strong>The following command in only available for Golden tester board.</strong></em></p><ol><li><h3 id=dut-calibrate-xo>DUT Calibrate XO
<a class=anchor href=#dut-calibrate-xo>#</a></h3><p>Command: <code>0x01, 0x31, 0xFC, 0x03, &lt;pwm id>, &lt;save>, &lt;limit></code></p><p>Calibrate XO with PWM signal.</p></li></ol><ul><li><p>pwm id:</p><ul><li><p>PWM0 0</p></li><li><p>PWM1 1</p></li><li><p>PWM2 2</p></li><li><p>PWM3 3</p></li><li><p>PWM4 4</p></li></ul></li><li><p>save:</p><ul><li><p>0: don’t save cap value.</p></li><li><p>1: save cap value on flash.</p></li></ul></li><li><p>limit: Max offset between DUT and tester. Unit is 1/8 us at 100ms(1.25PPM).</p></li></ul><p>For example, limit is 16, means that offset is ±2us at every 100ms(20 PPM).</p><p>Complete Event: <code>0x04, 0x0E, 0x06, 0x01, 0x31, 0xFC, &lt;status>,&lt;cap>,&lt;offset></code></p><ul><li><p>cap: cap value</p></li><li><p>offset: Offset between DUT and tester , Unit is 1/8 us at 100ms(1.25PPM).</p></li></ul><ol start=2><li><h3 id=dut-set-tx-power>DUT Set TX Power
<a class=anchor href=#dut-set-tx-power>#</a></h3><p>Command: <code>0x01, 0x32, 0xFC, 0x03, &lt;ch>, &lt;phy>, &lt;tx gain code></code></p></li></ol><ul><li>ch: 0 ~ 39</li><li>phy: Please refer to Table 2</li><li>tx gain: DUT tx gain code(0x0 ~ 0x7F), only available for carrier.</li></ul><p>Complete Event: <code>0x04, 0x0E, 0x05, 0x01, 0x32, 0xFC, &lt;status>,&lt;rssi></code></p><ul><li>rssi: RSSI value</li></ul><ol start=3><li><h3 id=dut-rx-sensitivity>DUT RX Sensitivity
<a class=anchor href=#dut-rx-sensitivity>#</a></h3><p>Command: <code>0x01, 0x33, 0xFC, 0x03, &lt;ch>, &lt;phy>, &lt;loss rate></code></p></li></ol><ul><li><p>ch: 0 ~ 39</p></li><li><p>phy: Please refer to Table 2</p></li><li><p>loss rate: 0~255, unit is 0.1%. For example ,20 means 2%</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x01, 0x06, 0x33, 0xFC, &lt;status>, &lt;tx power>, &lt;loss rate></code></p><ul><li><p>tx power: Tester TX power</p></li><li><p>loss rate: loss rate, unit is 0.1%. 20 means 2%.</p></li></ul><ol start=4><li><h3 id=dut-download-image>DUT Download Image
<a class=anchor href=#dut-download-image>#</a></h3><p>Command: <code>0x01, 0x34, 0xFC, 0x08, &lt;bootram size byte 0>, &lt;bootram size byte 1>, &lt;bootram size byte 2>, &lt;bootram size byte 3>, &lt;image size byte 0>, &lt;image size byte 1>, &lt;image size byte 2>, &lt;image size byte 3></code></p><ul><li>bootram size: bootram size. Default is 0x2000.</li><li>image size: application image size.</li></ul></li></ol><p>Example: bootram size is 0x2000 bytes, image size is 0xAC00 bytes:</p><p>01 34 fc 08 00 20 00 00 00 ac 00 00</p><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x34, 0xFC, &lt;status></code></p><ol start=5><li><h3 id=measure-xo>Measure XO
<a class=anchor href=#measure-xo>#</a></h3><p>Command: <code>0x01, 0x35, 0xFC, 0x02, &lt;port>, &lt;pin></code>
Measure DUT XO by PWM signal.</p><ul><li>port: DUT PWM port.</li><li>pin: DUT PWM pin.</li></ul></li></ol><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x35, 0xFC, &lt;status>, &lt;ppm byte0>, &lt;ppm byte1></code>
-ppm: if ppm > 0, DUT clock is faster then tester clock. If ppm &lt; 0, DUT clock is slower then tester clock.</p><ol start=6><li><h3 id=start-ble-scan>Start BLE Scan
<a class=anchor href=#start-ble-scan>#</a></h3><p>Command: <code>0x01, 0x40, 0xFC, 0x07, &lt;channel>, &lt;BD addr byte 0>, &lt; BD addr byte 1>, &lt; BD addr byte 2>, &lt; BD addr byte 3 >, &lt; BD addr byte 4>, &lt; BD addr byte 5 ></code></p></li></ol><ul><li><p>channel: Scan channel. 37, 38 or 39</p></li><li><p>BD addr: BLE device address, 6 bytes</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x40, 0xFC, &lt;status></code></p><ol start=7><li><h3 id=start-sdr-scan>Start SDR Scan
<a class=anchor href=#start-sdr-scan>#</a></h3><p>Command: <code>0x01, 0x41, 0xFC, 0x05, &lt;channel>, &lt;access addr byte 0>, &lt;access addr byte 1>, &lt;access addr byte 2>, &lt;access addr byte 3 ></code></p></li></ol><ul><li><p>channel:Scan channel. Range is 0 ~ 39.</p></li><li><p>addcess addr: SDR access address, 4 bytes</p></li></ul><p>Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x41, 0xFC, &lt;status></code></p><ol start=8><li><h3 id=stop-scan>Stop Scan
<a class=anchor href=#stop-scan>#</a></h3><p>Command: <code>0x01, 0x42, 0xFC, 0x00</code></p></li></ol><p>Complete Event: <code>0x04, 0x0E, 0x01, 0x01, 0x41, 0xFC, &lt;status>, &lt;RSSI>,&lt;freq_offset_code byte 0 >, &lt; freq_offset_code byte 1 >, &lt;receive packet number byte 0>, &lt;receive packet number byte 1></code></p><ul><li><p>RSSI: value of RSSI, int8_t. Example: return value is 0xCD, RSSI=0xCD-0x100=-51dBm</p></li><li><p>freq offset code: frequency offset code. It is int16_t value. Use this to covert to KHz:</p></li></ul><p><code>Offset(KHz) = 500.0/1024* freq_offset_code</code>
Complete Event: <code>0x04, 0x0E, 0x04, 0x01, 0x42, 0xFC, &lt;status></code></p><ol start=9><li><h3 id=get-hw-id>Get HW ID
<a class=anchor href=#get-hw-id>#</a></h3><p>Get hardware ID
Command: <code>0x01, 0x50, 0xFC, 0x00</code></p><p>Complete Event: <code>0x04, 0x0E, 0x08, 0x01, 0x5B, 0xFC, &lt;status> , &lt;id byte 0>, &lt;id byte 1>, &lt;version byte 2>, &lt;id byte 3></code></p><ul><li>id: 32bit HW ID</li></ul></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ol><li><a href=#introduction-to-ble-hci-commands>Introduction to BLE HCI Commands</a></li><li><a href=#hci-command-structure>HCI Command Structure</a></li><li><a href=#hci-command-format>HCI Command Format</a></li><li><a href=#hci-event-format>HCI Event Format</a></li><li><a href=#command-example>Command Example:</a></li><li><a href=#command-parameters>Command Parameters</a></li><li><a href=#hci--test-command-description>HCI Test Command Description</a><ol><li><a href=#reset>Reset</a></li><li><a href=#end-test>End Test</a></li><li><a href=#start-tx-test-modulation-signal>Start TX Test (Modulation signal)</a></li><li><a href=#start-rx-test-receive-mode>Start RX Test (Receive mode)</a></li><li><a href=#start-enhanced-tx-test>Start Enhanced TX Test</a></li><li><a href=#start-enhanced-rx-test>Start Enhanced RX Test</a></li><li><a href=#stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)</a></li><li><a href=#start-carrier-tx-carrier-signal>Start Carrier TX (carrier signal)</a></li><li><a href=#get-rssi>Get RSSI</a></li><li><a href=#vendor-tx-command>Vendor TX command</a></li><li><a href=#vendor-tx-end>Vendor TX end</a></li><li><a href=#set-cap>Set Cap</a></li><li><a href=#save--cap-to-flash>Save Cap to Flash</a></li><li><a href=#set-tx-power>Set TX Power</a></li><li><a href=#set-tx-gain>Set TX Gain</a></li><li><a href=#set-tx-power-table>Set TX Power Table</a></li><li><a href=#read-register>Read Register</a></li><li><a href=#write-register>Write Register</a></li><li><a href=#get-version-number>Get Version Number</a></li><li><a href=#set-trx-enable-pin>Set TRX Enable Pin</a></li><li><a href=#gpio-output>GPIO Output</a></li><li><a href=#gpio-input>GPIO input</a></li><li><a href=#get-adc-sample>Get ADC sample</a></li><li><a href=#start-pwm>Start PWM</a></li><li><a href=#stop-pwm>Stop PWM</a></li><li><a href=#set-rtc32k-output>Set RTC32K Output</a></li><li><a href=#enter-deep-sleep>Enter Deep Sleep</a></li><li><a href=#dut-calibrate-xo>DUT Calibrate XO</a></li><li><a href=#dut-set-tx-power>DUT Set TX Power</a></li><li><a href=#dut-rx-sensitivity>DUT RX Sensitivity</a></li><li><a href=#dut-download-image>DUT Download Image</a></li><li><a href=#measure-xo>Measure XO</a></li><li><a href=#start-ble-scan>Start BLE Scan</a></li><li><a href=#start-sdr-scan>Start SDR Scan</a></li><li><a href=#stop-scan>Stop Scan</a></li><li><a href=#get-hw-id>Get HW ID</a></li></ol></li></ol></nav></div></aside><script src=../../../../js/fuse.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=../../../../js/mark.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=../../../../js/fastsearch.js crossorigin=anonymous referrerpolicy=no-referrer></script></main><footer class="bg-black bottom-0 w-100 pa3" style=position:fixed;bottom:0;width:100% role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" style=color:#000>&copy; Copyright 2025 InPlay Inc</a></div></footer></body></html>