<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="HCI Command # Introduction to BLE HCI Commands # Bluetooth Low Energy (BLE) is a wireless communication technology designed for short-range communication with low power consumption. In BLE-enabled systems, the Host Controller Interface (HCI) serves as a crucial bridge between the host (application processor) and the Bluetooth controller embedded in the device. HCI commands play a pivotal role in facilitating communication and control between these two components.
Purpose of BLE HCI Commands # BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="HCI Command # Introduction to BLE HCI Commands # Bluetooth Low Energy (BLE) is a wireless communication technology designed for short-range communication with low power consumption. In BLE-enabled systems, the Host Controller Interface (HCI) serves as a crucial bridge between the host (application processor) and the Bluetooth controller embedded in the device. HCI commands play a pivotal role in facilitating communication and control between these two components.
Purpose of BLE HCI Commands # BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication."><meta property="og:type" content="article"><meta property="og:url" content="https://inplay-inc.github.io/docs/ble/6xxe/getting-started/hci-command/"><meta property="article:section" content="docs"><title>Hci Command | My New Hugo Site</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.7b5ca60448c7e874974d6d12156f89c2b32da59c25ae776b2522852d3ebb0865.css integrity="sha256-e1ymBEjH6HSXTW0SFW+JwrMtpZwlrndrJSKFLT67CGU=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.8357a6e88ab36fa082b6f6050b57c2450f707f262a07e4b7414ca9573e5c56f8.js integrity="sha256-g1em6Iqzb6CCtvYFC1fCRQ9wfyYqB+S3QUypVz5cVvg=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My New Hugo Site</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><input type=checkbox id=section-4a2a34b973517c42d0b3d163eace0399 class=toggle checked>
<label for=section-4a2a34b973517c42d0b3d163eace0399 class="flex justify-between"><a role=button>BLE Intro</a></label><ul><li><a href=/docs/ble/chapter1/>chapter1</a></li><li><input type=checkbox id=section-025115c9dd0a344e1adb5ebfa07cdf3e class=toggle>
<label for=section-025115c9dd0a344e1adb5ebfa07cdf3e class="flex justify-between"><a role=button>APP Intro</a></label><ul><li><a href=/docs/ble/app/chapter3/>chapter3</a></li></ul></li><li><a href=/docs/ble/chapter2/>chapter2</a></li><li><input type=checkbox id=section-acdf348f5514bab71eb8ad3370b7f779 class=toggle checked>
<label for=section-acdf348f5514bab71eb8ad3370b7f779 class="flex justify-between"><a role=button>6XXE</a></label><ul><li><input type=checkbox id=section-4cf3da0e185229bb3eba6ad6ef9e5e9a class=toggle checked>
<label for=section-4cf3da0e185229bb3eba6ad6ef9e5e9a class="flex justify-between"><a role=button>Getting Started</a></label><ul><li><a href=/docs/ble/6xxe/getting-started/hci-command/ class=active>Hci Command</a></li></ul></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Hci Command</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ol><li><a href=#introduction-to-ble-hci-commands>Introduction to BLE HCI Commands</a></li><li><a href=#purpose-of-ble-hci-commands>Purpose of BLE HCI Commands</a></li><li><a href=#hci-command-structure>HCI Command Structure</a></li><li><a href=#hci-command-format>HCI Command Format</a></li><li><a href=#hci-event-format>HCI Event Format</a></li><li><a href=#command-example>Command Example:</a></li><li><a href=#command-parameters>Command Parameters</a></li><li><a href=#hci--test-command-description>HCI Test Command Description</a><ol><li><a href=#reset>Reset</a></li><li><a href=#end-test>End Test</a></li><li><a href=#start-tx-test-modulation-signal>Start TX Test (Modulation signal)</a></li><li><a href=#start-rx-test-receive-mode>Start RX Test (Receive mode)</a></li><li><a href=#start-enhanced-tx-test>Start Enhanced TX Test</a></li><li><a href=#start-enhanced-rx-test>Start Enhanced RX Test</a></li><li><a href=#stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)</a></li><li><a href=#get-rssi>Get RSSI</a></li><li><a href=#vendor-tx-command>Vendor TX command</a></li><li><a href=#set-cap>Set Cap</a></li><li><a href=#save-cap-to-efuse>Save Cap to Efuse</a></li><li><a href=#save--cap-to-flash>Save Cap to Flash</a></li><li><a href=#set-tx-power>Set TX Power</a></li><li><a href=#read-register>Read Register</a></li><li><a href=#write-register>Write Register</a></li><li><a href=#start-pwm>Start PWM</a></li><li><a href=#stop-pwm>Stop PWM</a></li><li><a href=#get-version-number>Get Version Number</a></li><li><a href=#set-tx-gain>Set TX Gain</a></li><li><a href=#dut-calibrate-xo>DUT Calibrate XO</a></li><li><a href=#dut-set-tx-power>DUT Set TX Power</a></li><li><a href=#dut-rx-sensitivity>DUT RX Sensitivity</a></li><li><a href=#dut-download-image>DUT Download Image</a></li><li><a href=#start-ble-scan>Start BLE Scan</a></li><li><a href=#start-sdr-scan>Start SDR Scan</a></li><li><a href=#stop-scan>Stop Scan</a></li></ol></li></ol></nav></aside></header><article class=markdown><h1 id=hci-command>HCI Command
<a class=anchor href=#hci-command>#</a></h1><h2 id=introduction-to-ble-hci-commands>Introduction to BLE HCI Commands
<a class=anchor href=#introduction-to-ble-hci-commands>#</a></h2><p>Bluetooth Low Energy (BLE) is a wireless communication technology designed for short-range communication with low power consumption. In BLE-enabled systems, the Host Controller Interface (HCI) serves as a crucial bridge between the host (application processor) and the Bluetooth controller embedded in the device. HCI commands play a pivotal role in facilitating communication and control between these two components.</p><h2 id=purpose-of-ble-hci-commands>Purpose of BLE HCI Commands
<a class=anchor href=#purpose-of-ble-hci-commands>#</a></h2><p>BLE HCI commands are standardized instructions exchanged between the host and the Bluetooth controller to manage and configure Bluetooth communication. These commands enable the host to initiate various actions, such as establishing connections, configuring parameters, and managing the overall behavior of the Bluetooth device.</p><h2 id=hci-command-structure>HCI Command Structure
<a class=anchor href=#hci-command-structure>#</a></h2><p>BLE HCI commands follow a specific structure, adhering to a standardized format that includes an HCI type, opcode, and parameters. Understanding this structure is essential for developers and engineers working on BLE-enabled devices, as it allows them to communicate effectively with the Bluetooth controller.</p><h2 id=hci-command-format>HCI Command Format
<a class=anchor href=#hci-command-format>#</a></h2><p>The general format of a BLE HCI command packet is as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>| HCI Type (1 byte) | Opcode (2 bytes) | Param Length | Params |
</span></span><span style=display:flex><span>|-------------------|------------------|--------------|--------|
</span></span></code></pre></div><ul><li><strong>HCI Type:</strong> A one-byte identifier specifying the type of HCI command. It is 0x1 for HCI command packet.</li><li><strong>Opcode (Operation Code):</strong> A unique identifier (2 bytes) specifying the type of command.</li><li><strong>Parameter Length:</strong> A byte indicating the length of the parameters that follow.</li><li><strong>Parameters:</strong> Additional data or information associated with the command.</li></ul><h2 id=hci-event-format>HCI Event Format
<a class=anchor href=#hci-event-format>#</a></h2><p>Similarly, the format for an HCI event packet is structured as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>| HCI Type (1 byte) | Event Code (1 byte) | Parameter Length | Data | 
</span></span><span style=display:flex><span>|-------------------|---------------------|------------------|------|
</span></span></code></pre></div><ul><li><strong>HCI Type:</strong> A one-byte identifier specifying the type of HCI event. It is 0x4 for HCI event packet.</li><li><strong>Event Code:</strong> A unique identifier (1 byte) specifying the type of event or response. It is 0xE for command complete event.</li><li><strong>Parameter Length:</strong> A byte indicating the length of the parameters or data that follow.</li><li><strong>Data:</strong> Additional information or payload associated with the event or response.</li></ul><h2 id=command-example>Command Example:
<a class=anchor href=#command-example>#</a></h2><p><strong>Reset Command</strong></p><p>Command: <code>0x01, 0x03, 0x0C, 0x00</code></p><ul><li>0x01 – HCI Type</li><li>0x03 0x0C – operation code</li><li>0x00 – the number of bytes of parameters. For reset, the number is zero because no parameter.</li></ul><p>Command Complete Event: <code>0x04, 0x0E, &lt;Commands Available>, 0x01, 0x03, 0x0C, &lt;status></code></p><ul><li><code>0x04</code> – single byte before all events.</li><li><code>0x0E</code> – event code after command completion</li><li><code>&lt;Commands Available></code> – the number of commands that the controller can receive. It is 0x1 by default.</li><li><code>0x01 0x03 0x0C</code> – operation code</li><li><code>&lt;status></code> – <code>0x00</code> means the command was successful. If not <code>0x00</code>, it means an error. The error list reference is to <em>Volume 2 Part D of the Core Spec for a list of error codes</em>.</li></ul><h2 id=command-parameters>Command Parameters
<a class=anchor href=#command-parameters>#</a></h2><ul><li>packet type:<table><thead><tr><th>Packet type</th><th>Payload</th></tr></thead><tbody><tr><td>0x00</td><td>PRBS9 sequence ‘11111111100000111101…’ (in transmission order)</td></tr><tr><td>0x01</td><td>Repeated ‘11110000’ (in transmission order)</td></tr><tr><td>0x02</td><td>Repeated ‘10101010’ (in transmission order)</td></tr><tr><td>0x03</td><td>PRBS15</td></tr><tr><td>0x04</td><td>Repeated ‘11111111’</td></tr><tr><td>0x05</td><td>Repeated ‘00000000’</td></tr><tr><td>0x06</td><td>Repeated ‘00001111’</td></tr><tr><td>0x07</td><td>Repeated ‘01010101’</td></tr></tbody></table></li></ul><p><em>Table 1</em></p><ul><li>phy:<table><thead><tr><th>Phy</th><th>Description</th></tr></thead><tbody><tr><td>0x01</td><td>Transmitter set to use the LE 1M PHY</td></tr><tr><td>0x02</td><td>Transmitter set to use the LE 2M PHY</td></tr><tr><td>0x03</td><td>Transmitter set to use the LE Coded PHY with S=8 data coding</td></tr><tr><td>0x04</td><td>Transmitter set to use the LE Coded PHY with S=2 data coding</td></tr></tbody></table></li></ul><p><em>Table 2</em></p><ul><li>tx power:<table><thead><tr><th>Value</th><th>TX Power</th></tr></thead><tbody><tr><td>0x00</td><td>Max Power</td></tr><tr><td>0x01</td><td>7dBm</td></tr><tr><td>0x02</td><td>6.5dBm</td></tr><tr><td>0x03</td><td>6dBm</td></tr><tr><td>0x04</td><td>5.5dBm</td></tr><tr><td>0x05</td><td>5dBm</td></tr><tr><td>0x06</td><td>4.5dBm</td></tr><tr><td>0x07</td><td>4dBm</td></tr><tr><td>0x08</td><td>3.5dBm</td></tr><tr><td>0x09</td><td>3dBm</td></tr><tr><td>0x0A</td><td>2.5dBm</td></tr><tr><td>0x0B</td><td>2dBm</td></tr><tr><td>0x0C</td><td>1.5dBm</td></tr><tr><td>0x0D</td><td>1dBm</td></tr><tr><td>0x0E</td><td>0.5dBm</td></tr><tr><td>0x0F</td><td>0dBm</td></tr><tr><td>0x10</td><td>-1dBm</td></tr><tr><td>0x11</td><td>-2dBm</td></tr><tr><td>0x12</td><td>-3dBm</td></tr><tr><td>0x13</td><td>-4dBm</td></tr><tr><td>0x14</td><td>-5dBm</td></tr><tr><td>0x15</td><td>-6dBm</td></tr><tr><td>0x16</td><td>-8dBm</td></tr><tr><td>0x17</td><td>-12dBm</td></tr><tr><td>0x18</td><td>-16dBm</td></tr><tr><td>0x19</td><td>-20dBm</td></tr><tr><td>0x1A</td><td>-43dBm</td></tr></tbody></table></li></ul><p><em>Table 3</em></p><h2 id=hci--test-command-description>HCI Test Command Description
<a class=anchor href=#hci--test-command-description>#</a></h2><ol><li><h3 id=reset>Reset
<a class=anchor href=#reset>#</a></h3></li></ol><p>The Reset command needs to be sent only once after power-up.</p><p>Command: 0x01, 0x03, 0x0C, 0x00</p><p>Complete Event: 0x04, 0x0E,01, 0x01, 0x03, 0x0C,</p><ol start=2><li><h3 id=end-test>End Test
<a class=anchor href=#end-test>#</a></h3></li></ol><p>After each modulation signal test command (TX or RX command) is completed, you need to send an &ldquo;end test command.&rdquo; The end test command is as simple as the reset command, but the return command is more complex. The commands returned by the serial port include 2 bytes, indicating the number of packets received by DUT at the end of the command. Reference to <em>Volume 2 Part E Section 7.8.30.</em></p><p>Command: 0x01, 0x1F, 0x20, 0x00</p><p>Complete Event：0x04, 0x0E, 01, 0x01, 0x1F, 0x20, , &lt;packets number byte 0>, &lt;packets number byte 1></p><ol start=3><li><h3 id=start-tx-test-modulation-signal>Start TX Test (Modulation signal)
<a class=anchor href=#start-tx-test-modulation-signal>#</a></h3></li></ol><p>The LE TX test command has 3 parameters, channel ,data length ,packet type. Reference to <em>Volume 2 Part E Section 7.8.29</em>.</p><p>Transmitter Test command：0x01, 0x1E, 0x20, 0x03, , ,</p><ul><li>–the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402G</li><li>– please use 0x25 in 1M mode</li><li>– please refer to table 1.</li></ul><p>Complete Event：0x04, 0x0E, 01, 0x01, 0x1E, 0x20,</p><ol start=4><li><h3 id=start-rx-test-receive-mode>Start RX Test (Receive mode)
<a class=anchor href=#start-rx-test-receive-mode>#</a></h3></li></ol><p>The LE RX test command has 1 parameter, channel. Reference to <em>Volume 2 Part E Section 7.8.28</em>.</p><p>Receive Test command：0x01, 0x1D, 0x20, 0x01,</p><ul><li>–the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402GHz</li></ul><p>Complete Event 0x04, 0x0E, 0x01, 0x01, 0x1D, 0x20,</p><ol start=5><li><strong>Start Carrier TX (carrier signal)</strong></li></ol><p>Command：0x01, 0x01, 0xFC, 0x02,</p><ul><li>–the range is 0x00 to 0x27（39），Formula：N =（F – 2402）/ 2； 0x00 means 2.402GHz</li><li>0: use default value. 0x1 ~ 0x7F: PA gain, 0x19 is 0dBm.</li></ul><p>Complete Event：0x04, 0x0E, 0x01, 0x01, 0x01, 0xFC,</p><ol start=6><li><h3 id=start-enhanced-tx-test>Start Enhanced TX Test
<a class=anchor href=#start-enhanced-tx-test>#</a></h3></li></ol><p>The LE Enhanced TX Test command has 3 parameters - the transmit channel. See Volume 2 Part E Section 7.8.501</p><p>Command: 0x01, 0x34, 0x20, 0x04, , , ,</p><ul><li><p>- the range is 0x00 to 0x27 (39), the formula is: N = (F - 2402)/ 2; 0x00 represents 2.402G</p></li><li><p>- please use 0x25 in 1M mode</p></li><li><p>- please refer to table 1</p></li><li><p>- Please refer to table 2</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x34, 0x20,</p><ol start=7><li><h3 id=start-enhanced-rx-test>Start Enhanced RX Test
<a class=anchor href=#start-enhanced-rx-test>#</a></h3></li></ol><p>The LE Enhanced Receive Mode Test command has one parameter - Receive Channel, see Volume 2 Part E Section 7.8.50.</p><p>Command: 0x01, 0x33, 0x20, 0x03, , ,</p><ul><li><p>- range 0x00 to 0x27 (39), formula: N = (F - 2402)/ 2; 0x00 represents 2.402G</p></li><li><p>- please refer to table 1</p></li><li><p>Normally set to 0</p><ul><li><p>0x00 Assume transmitter will have a standard modulation index</p></li><li><p>0x01 Assume transmitter will have a stable modulation index</p></li></ul></li></ul><p>Complete Event: 0x04, 0x0E, 01, 0x01, 0x33, 0x20,</p><ol start=8><li><h3 id=stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)
<a class=anchor href=#stop-carrier-tx--carrier-signal>#</a></h3></li></ol><p>Command：0x01, 0x04, 0xFC, 0x00</p><p>Complete Event:0x04, 0x0E,0x01, 0x01, 0x04, 0xFC,</p><ol start=9><li><h3 id=get-rssi>Get RSSI
<a class=anchor href=#get-rssi>#</a></h3></li></ol><p>Command：0x01, 0x03, 0xFC, 0x00</p><p>Complete Event: 0x04, 0x0E, 01, 0x01, 0x03, 0xFC, ，</p><ul><li>value of RSSI, it is a int8_t value. Example: return value is 0xCD, RSSI=0xCD-0x100=-51dBm</li></ul><ol start=10><li><h3 id=vendor-tx-command>Vendor TX command
<a class=anchor href=#vendor-tx-command>#</a></h3></li></ol><p>Command：0x01, 0x0D, 0xFC, 0x06, , , , , ,</p><ul><li><p>See “Start Enhanced TX Test”</p></li><li><p>See “Start Enhanced TX Test”</p></li><li><p>Refer to table 1</p></li><li><p>Refer to table 2</p></li><li><p>Reserved, must set to 0.</p></li><li><ul><li><p>1: Continuous TX</p></li><li><p>0: Normal TX</p></li></ul></li></ul><p>Complete Event:0x04, 0x0E, 0x01, 0x01, 0x0D, 0xFC,</p><ol start=11><li><h3 id=set-cap>Set Cap
<a class=anchor href=#set-cap>#</a></h3></li></ol><p>Command: 0x01, 0x05, 0xFC, 0x01</p><ul><li>– capacitance range is 0x0~0xF</li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x05, 0xFC,</p><ol start=12><li><h3 id=save-cap-to-efuse>Save Cap to Efuse
<a class=anchor href=#save-cap-to-efuse>#</a></h3></li></ol><p>Command: 0x01, 0x06, 0xFC, 0x01</p><ul><li>– capacitance range is 0x0~0xF</li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x06, 0xFC,</p><p><strong>Notice:</strong></p><p>This command burn cap data to Efuse memory. Must supply 3.3V power on VDDQ pin.</p><p>Efuse is OTP(One Time Programmable) memory. Make sure bure correct value in Efuse.</p><ol start=13><li><h3 id=save--cap-to-flash>Save Cap to Flash
<a class=anchor href=#save--cap-to-flash>#</a></h3></li></ol><p>Command: 0x01, 0x08, 0xFC, 0x01,</p><ul><li><p>– capacitance range is 0x0~0xF</p><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x08, 0xFC,</p></li></ul><ol start=14><li><h3 id=set-tx-power>Set TX Power
<a class=anchor href=#set-tx-power>#</a></h3><p>Sets the transmit power. Note that it is not valid for Carrier TX command.</p></li></ol><p>Commands: 0x01, 0x07, 0xFC, 0x01,</p><ul><li>- transmit power, range 0x00~0x7F. Default is 0x18.</li></ul><p>Complete Event: 0x04, 0x0E, 01, 0x01, 0x07, 0xFC,</p><ol start=15><li><h3 id=read-register>Read Register
<a class=anchor href=#read-register>#</a></h3><p>Read register.</p></li></ol><p>Command: 0x01, 0x0E, 0xFC, 0x04, ,,，</p><ul><li><p>&lt; Address Byte0> - Register address byte 0.</p></li><li><p>&lt; Address Byte1> - Register address byte 1</p></li><li><p>&lt; Address Byte2> - Register address byte 2</p></li><li><p>&lt; Address Byte3> - Register address byte 3</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x07, 0xFC, ,&lt;Reg Value Byte 0>, &lt;Reg Value Byte 1>,&lt;Reg Value Byte 2>，&lt;Reg Value Byte 3></p><ul><li>&lt;Reg Value Byte 0>, &lt;Reg Value Byte 1>,&lt;Reg Value Byte 2>，&lt;Reg Value Byte 3>:Register value</li></ul><ol start=16><li><h3 id=write-register>Write Register
<a class=anchor href=#write-register>#</a></h3></li></ol><p>Write register.</p><p>Command: 0x01, 0x0F, 0xFC, 0x08, ,,，, &lt;Reg Value Byte 0>, &lt;Reg Value Byte 1>,&lt;Reg Value Byte 2>，&lt;Reg Value Byte 3></p><ul><li><p>&lt; Address Byte0> - Register address byte 0.</p></li><li><p>&lt; Address Byte1> - Register address byte 1</p></li><li><p>&lt; Address Byte2> - Register address byte 2</p></li><li><p>&lt; Address Byte3> - Register address byte 3</p></li><li><p>&lt;Reg Value Byte 0> - Register value byte 0.</p></li><li><p>&lt;Reg Value Byte 1> - Register value byte 1.</p></li><li><p>&lt;Reg Value Byte 2> - Register value byte 2.</p></li><li><p>&lt;Reg Value Byte 3> - Register value byte 3.</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x07, 0xFC,</p><ol start=17><li><h3 id=start-pwm>Start PWM
<a class=anchor href=#start-pwm>#</a></h3><p>Command: 0x01, 0x09, 0xFC, 0x01,</p></li></ol><p>pwm id:</p><ul><li><p>PWM0 0</p></li><li><p>PWM1 1</p></li><li><p>PWM2 2</p></li><li><p>PWM3 3</p></li><li><p>PWM4 4</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x09, 0xFC,</p><ol start=18><li><h3 id=stop-pwm>Stop PWM
<a class=anchor href=#stop-pwm>#</a></h3><p>Command: 0x01, 0x0A, 0xFC, 0x00</p></li></ol><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x0A, 0xFC,</p><ol start=19><li><h3 id=get-version-number>Get Version Number
<a class=anchor href=#get-version-number>#</a></h3><p>Command: 0x01, 0x50, 0xFC, 0x00</p></li></ol><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x50, 0xFC, , &lt;version byte 0>, &lt;version byte 1>, &lt;version byte 2>, &lt;version byte 3></p><ul><li>- 32bit HCI command SW version number</li></ul><ol start=20><li><h3 id=set-tx-gain>Set TX Gain
<a class=anchor href=#set-tx-gain>#</a></h3><p>Command: 0x01, 0x51, 0xFC, 0x00,</p></li></ol><ul><li>: TX gain, range is0x00 ~ 0x7F. Default is 0x18.</li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x51, 0xFC,</p><p><em><strong>The following command in only available for Golden tester board.</strong></em></p><ol start=20><li><h3 id=dut-calibrate-xo>DUT Calibrate XO
<a class=anchor href=#dut-calibrate-xo>#</a></h3><p>Command 0x01, 0x31, 0xFC, 0x03, , ,</p></li></ol><p>Calibrate XO with PWM signal.</p><p>:</p><ul><li><p>PWM0 0</p></li><li><p>PWM1 1</p></li><li><p>PWM2 2</p></li><li><p>PWM3 3</p></li><li><p>PWM4 4</p></li></ul><p>:</p><ul><li><p>0: don’t save cap value.</p></li><li><p>1: save cap value on flash.</p></li></ul><p>: Max offset between DUT and tester. Unit is 1/8 us at 100ms(1.25PPM).</p><p>For example, limit is 16, means that offset is ±2us at every 100ms(20 PPM).</p><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x31, 0xFC, ,,</p><ul><li><p>cap value</p></li><li><p>Offset between DUT and tester , Unit is 1/8 us at 100ms(1.25PPM).</p></li></ul><ol start=21><li><h3 id=dut-set-tx-power>DUT Set TX Power
<a class=anchor href=#dut-set-tx-power>#</a></h3><p>Test DUT tx power command: 0x01, 0x32, 0xFC, 0x03 , ,</p></li></ol><ul><li>0 ~ 39</li><li>- Please refer to table 2</li><li>DUT tx power code(0x0 ~ 0x7F), only available for carrier.</li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x32, 0xFC, ,</p><ul><li>RSSI value</li></ul><ol start=22><li><h3 id=dut-rx-sensitivity>DUT RX Sensitivity
<a class=anchor href=#dut-rx-sensitivity>#</a></h3><p>Test DUT RX sensitivity command: 0x01, 0x33, 0xFC, 0x03, , ,</p></li></ol><ul><li><p>0 ~ 39</p></li><li><p>- Please refer to table 2</p></li><li><p>0~255, unit is 0.1%. For example ,20 means 2%</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x33, 0xFC, ,</p><ul><li><p>Tester TX power</p></li><li><p>loss rate, unit is 0.1%. 20 means 2%.</p></li></ul><ol start=22><li><h3 id=dut-download-image>DUT Download Image
<a class=anchor href=#dut-download-image>#</a></h3><p>Command: 0x01, 0x34, 0xFC, 0x08,&lt;bootram size byte 0>,&lt;bootram size byte 1>,&lt;bootram size byte 2>,&lt;bootram size byte 3>,&lt;image size byte 0>,,&lt;image size byte 1>,&lt;image size byte 2>,&lt;image size byte 3></p><ul><li>&lt; bootram size > - bootram size. Default is 0x2000.</li><li>&lt; image size > - application image size.</li></ul></li></ol><p>Example: bootram size is 0x2000 bytes, image size is 0xAC00 bytes:</p><p>01 34 fc 08 00 20 00 00 00 ac 00 00</p><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x34, 0xFC,</p><ol start=23><li><h3 id=start-ble-scan>Start BLE Scan
<a class=anchor href=#start-ble-scan>#</a></h3><p>Command: 0x01, 0x40, 0xFC, 0x07,,&lt;BD addr byte 0>,&lt; BD addr byte 1>,&lt; BD addr byte 2>,&lt; BD addr byte 3 >,&lt; BD addr byte 4>,&lt; BD addr byte 5 ></p></li></ol><ul><li><p>:Scan channel. 37, 38 or 39</p></li><li><p>: BLE device address, 6 bytes</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x40, 0xFC,</p><ol start=24><li><h3 id=start-sdr-scan>Start SDR Scan
<a class=anchor href=#start-sdr-scan>#</a></h3><p>Command: 0x01, 0x41, 0xFC, 0x05,,&lt;access addr byte 0>,&lt; access addr byte 1>,&lt; access addr byte 2>,&lt; access addr byte 3 ></p></li></ol><ul><li><p>:Scan channel. Range is 0 ~ 39.</p></li><li><p>: SDR access address, 4 bytes</p></li></ul><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x41, 0xFC,</p><ol start=25><li><h3 id=stop-scan>Stop Scan
<a class=anchor href=#stop-scan>#</a></h3><p>Command: 0x01, 0x42, 0xFC, 0x00</p></li></ol><p>Complete Event: 0x04, 0x0E, 0x01, 0x01, 0x41, 0xFC, , ,&lt;freq_offset_code byte 0 >,&lt; freq_offset_code byte 1 >,&lt;receive packet number byte 0>,&lt;receive packet number byte 1></p><ul><li><p>value of RSSI, int8_t. Example: return value is 0xCD, RSSI=0xCD-0x100=-51dBm</p></li><li><p>&lt;freq_offset_code > frequency offset code. It is int16_t value. Use this to covert to KHz:</p></li></ul><p>Offset(KHz) = 500.0/1024* freq_offset_code</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ol><li><a href=#introduction-to-ble-hci-commands>Introduction to BLE HCI Commands</a></li><li><a href=#purpose-of-ble-hci-commands>Purpose of BLE HCI Commands</a></li><li><a href=#hci-command-structure>HCI Command Structure</a></li><li><a href=#hci-command-format>HCI Command Format</a></li><li><a href=#hci-event-format>HCI Event Format</a></li><li><a href=#command-example>Command Example:</a></li><li><a href=#command-parameters>Command Parameters</a></li><li><a href=#hci--test-command-description>HCI Test Command Description</a><ol><li><a href=#reset>Reset</a></li><li><a href=#end-test>End Test</a></li><li><a href=#start-tx-test-modulation-signal>Start TX Test (Modulation signal)</a></li><li><a href=#start-rx-test-receive-mode>Start RX Test (Receive mode)</a></li><li><a href=#start-enhanced-tx-test>Start Enhanced TX Test</a></li><li><a href=#start-enhanced-rx-test>Start Enhanced RX Test</a></li><li><a href=#stop-carrier-tx--carrier-signal>Stop Carrier TX ( Carrier signal)</a></li><li><a href=#get-rssi>Get RSSI</a></li><li><a href=#vendor-tx-command>Vendor TX command</a></li><li><a href=#set-cap>Set Cap</a></li><li><a href=#save-cap-to-efuse>Save Cap to Efuse</a></li><li><a href=#save--cap-to-flash>Save Cap to Flash</a></li><li><a href=#set-tx-power>Set TX Power</a></li><li><a href=#read-register>Read Register</a></li><li><a href=#write-register>Write Register</a></li><li><a href=#start-pwm>Start PWM</a></li><li><a href=#stop-pwm>Stop PWM</a></li><li><a href=#get-version-number>Get Version Number</a></li><li><a href=#set-tx-gain>Set TX Gain</a></li><li><a href=#dut-calibrate-xo>DUT Calibrate XO</a></li><li><a href=#dut-set-tx-power>DUT Set TX Power</a></li><li><a href=#dut-rx-sensitivity>DUT RX Sensitivity</a></li><li><a href=#dut-download-image>DUT Download Image</a></li><li><a href=#start-ble-scan>Start BLE Scan</a></li><li><a href=#start-sdr-scan>Start SDR Scan</a></li><li><a href=#stop-scan>Stop Scan</a></li></ol></li></ol></nav></div></aside></main></body></html>