<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InPlay API: Platform power management and sleep timer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InPlay API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___h_a_l___p_o_w_e_r.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Platform power management and sleep timer<div class="ingroups"><a class="el" href="group___h_a_l.html">HAL driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL_POWER.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2194e88ce51bf5ebe7e254830cd4e960"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga2194e88ce51bf5ebe7e254830cd4e960">hal_pm_init</a> (int slp_wup, int ble_wup, int bod_wup, int mix_wup, int trig_retn, uint32_t dm_retn, uint32_t em_retn)</td></tr>
<tr class="memdesc:ga2194e88ce51bf5ebe7e254830cd4e960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power Management initialization function.  <a href="#ga2194e88ce51bf5ebe7e254830cd4e960">More...</a><br /></td></tr>
<tr class="separator:ga2194e88ce51bf5ebe7e254830cd4e960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4aaf4f8c8651801604027538cd763394"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga4aaf4f8c8651801604027538cd763394">hal_pm_reg_mod</a> (struct pm_module *module)</td></tr>
<tr class="memdesc:ga4aaf4f8c8651801604027538cd763394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register power module function.  <a href="#ga4aaf4f8c8651801604027538cd763394">More...</a><br /></td></tr>
<tr class="separator:ga4aaf4f8c8651801604027538cd763394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3596f2b81d1dd5f14486b6360332ded0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga3596f2b81d1dd5f14486b6360332ded0">hal_pm_unreg_mod</a> (struct pm_module *module)</td></tr>
<tr class="memdesc:ga3596f2b81d1dd5f14486b6360332ded0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister power module function.  <a href="#ga3596f2b81d1dd5f14486b6360332ded0">More...</a><br /></td></tr>
<tr class="separator:ga3596f2b81d1dd5f14486b6360332ded0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67a11833171d9c88c3cc6277b5ff3cd1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga67a11833171d9c88c3cc6277b5ff3cd1">hal_pm_suspend_and_resume</a> (uint32_t os_sleep)</td></tr>
<tr class="memdesc:ga67a11833171d9c88c3cc6277b5ff3cd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">System shutdown and resume function.  <a href="#ga67a11833171d9c88c3cc6277b5ff3cd1">More...</a><br /></td></tr>
<tr class="separator:ga67a11833171d9c88c3cc6277b5ff3cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaa86fe545557cd3cb3c425f66c11338"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#gacaa86fe545557cd3cb3c425f66c11338">hal_pm_reg_ble_mod</a> (struct pm_module *module)</td></tr>
<tr class="memdesc:gacaa86fe545557cd3cb3c425f66c11338"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register BLE power module function.  <a href="#gacaa86fe545557cd3cb3c425f66c11338">More...</a><br /></td></tr>
<tr class="separator:gacaa86fe545557cd3cb3c425f66c11338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f51c5389d49fb83f215a893479bb4c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga5f51c5389d49fb83f215a893479bb4c0">hal_pm_unreg_ble_mod</a> (struct pm_module *module)</td></tr>
<tr class="memdesc:ga5f51c5389d49fb83f215a893479bb4c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister BLE power module function.  <a href="#ga5f51c5389d49fb83f215a893479bb4c0">More...</a><br /></td></tr>
<tr class="separator:ga5f51c5389d49fb83f215a893479bb4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf60c303e33f34006916307646d55bba6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#gaf60c303e33f34006916307646d55bba6">hal_pm_get_wup_src</a> (void)</td></tr>
<tr class="memdesc:gaf60c303e33f34006916307646d55bba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the wake up source.  <a href="#gaf60c303e33f34006916307646d55bba6">More...</a><br /></td></tr>
<tr class="separator:gaf60c303e33f34006916307646d55bba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46c8e13de9c4ccd10ed3c5e6d2efb8b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___p_o_w_e_r.html#ga46c8e13de9c4ccd10ed3c5e6d2efb8b9">hal_pm_mix_sig_wup_enable</a> (void)</td></tr>
<tr class="memdesc:ga46c8e13de9c4ccd10ed3c5e6d2efb8b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/Disable mix signal (GPIO PORT 2) wake up.  <a href="#ga46c8e13de9c4ccd10ed3c5e6d2efb8b9">More...</a><br /></td></tr>
<tr class="separator:ga46c8e13de9c4ccd10ed3c5e6d2efb8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>HAL_POWER. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf60c303e33f34006916307646d55bba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf60c303e33f34006916307646d55bba6">&#9670;&nbsp;</a></span>hal_pm_get_wup_src()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hal_pm_get_wup_src </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the wake up source. </p>
<dl class="section return"><dt>Returns</dt><dd>The source of wake up, </dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_ws </dd></dl>

</div>
</div>
<a id="ga2194e88ce51bf5ebe7e254830cd4e960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2194e88ce51bf5ebe7e254830cd4e960">&#9670;&nbsp;</a></span>hal_pm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_pm_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slp_wup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ble_wup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bod_wup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mix_wup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trig_retn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dm_retn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>em_retn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power Management initialization function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">slp_wup</td><td>Sleep timer can wake up system from deep sleep; 1: yes, 0: no. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ble_wup</td><td>BLE can wake up system from deep slee; 1: yes, 0: no. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bod_wup</td><td>Brown out can wake up system from deep slee; 1: yes, 0: no. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mix_wup</td><td>Mixed signal IO can wake up system from deep slee; 1: yes, 0: no. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trig_retn</td><td>Trigger memory retention flag; 1: yes, 0: no </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dm_retn</td><td>Data memory retention flag; </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>enum dm_retn. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">em_retn</td><td>BLE memory retention flag; </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>enum em_retn.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_err </dd></dl>

</div>
</div>
<a id="ga46c8e13de9c4ccd10ed3c5e6d2efb8b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46c8e13de9c4ccd10ed3c5e6d2efb8b9">&#9670;&nbsp;</a></span>hal_pm_mix_sig_wup_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_pm_mix_sig_wup_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable/Disable mix signal (GPIO PORT 2) wake up. </p>
<dl class="section return"><dt>Returns</dt><dd>No Return </dd></dl>

</div>
</div>
<a id="gacaa86fe545557cd3cb3c425f66c11338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaa86fe545557cd3cb3c425f66c11338">&#9670;&nbsp;</a></span>hal_pm_reg_ble_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_pm_reg_ble_mod </td>
          <td>(</td>
          <td class="paramtype">struct pm_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register BLE power module function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module</td><td>A pointer to the PM module structure, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>struct pm_module <br />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_err </dd></dl>

</div>
</div>
<a id="ga4aaf4f8c8651801604027538cd763394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4aaf4f8c8651801604027538cd763394">&#9670;&nbsp;</a></span>hal_pm_reg_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_pm_reg_mod </td>
          <td>(</td>
          <td class="paramtype">struct pm_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register power module function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module</td><td>A pointer to the PM module structure, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>struct pm_module <br />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_err </dd></dl>

</div>
</div>
<a id="ga67a11833171d9c88c3cc6277b5ff3cd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67a11833171d9c88c3cc6277b5ff3cd1">&#9670;&nbsp;</a></span>hal_pm_suspend_and_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hal_pm_suspend_and_resume </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>os_sleep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System shutdown and resume function. </p>
<dl class="section note"><dt>Note</dt><dd>This function is designed to be called by the OS idle routine. The shut down procedure are as follows:<ol type="1">
<li>Mask all the interrupts,</li>
</ol>
<ol type="1">
<li>Call each driver or application's power state function to find the power state and sleep time,</li>
<li>If power state is active, then unmask interrupt and return to OS,</li>
<li>If power state is sleep, then call arm's WFI to shut down CPU clock. Once any interrupt happens, WFI will finish and this function will unmask interrupt and return the sleep time to OS,</li>
<li>If power state is deep sleep, then save the context and ask HW to remove power,</li>
<li>Once HW resume, boot ram will recover clock, XIP, then jump to this function, This function will call each driver and application register power up function to resume system and then it will unmask interrupt and return the deep sleep time to the OS.</li>
</ol>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">os_sleep</td><td>Time in millisecond that Os is idle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Final sleep time. </dd></dl>

</div>
</div>
<a id="ga5f51c5389d49fb83f215a893479bb4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f51c5389d49fb83f215a893479bb4c0">&#9670;&nbsp;</a></span>hal_pm_unreg_ble_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_pm_unreg_ble_mod </td>
          <td>(</td>
          <td class="paramtype">struct pm_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister BLE power module function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module</td><td>A pointer to the PM module structure, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>struct pm_module <br />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_err </dd></dl>

</div>
</div>
<a id="ga3596f2b81d1dd5f14486b6360332ded0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3596f2b81d1dd5f14486b6360332ded0">&#9670;&nbsp;</a></span>hal_pm_unreg_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_pm_unreg_mod </td>
          <td>(</td>
          <td class="paramtype">struct pm_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister power module function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module</td><td>A pointer to the PM module structure, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>struct pm_module <br />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd>enum pm_err </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
